<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ISL Sign Detector</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    body { 
      font-family: 'Inter', sans-serif; 
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 25%, #0f0f0f 50%, #1f1f1f 75%, #0a0a0a 100%);
      min-height: 100vh;
      position: relative;
    }
    
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.03) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.02) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(255, 255, 255, 0.01) 0%, transparent 50%);
      pointer-events: none;
      z-index: -1;
    }

    .tab-active { 
      border-bottom: 3px solid #ffffff; 
      color: #ffffff; 
      font-weight: 600;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
    }
    
    .overlay-grid { 
      background-image: linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px), 
                        linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px); 
      background-size: 20px 20px; 
    }
    
    .card { 
      background: linear-gradient(145deg, #1a1a1a 0%, #0f0f0f 100%);
      border: 1px solid #333333; 
      color: #ffffff;
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.3),
        0 2px 8px rgba(0, 0, 0, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transition: left 0.5s;
    }
    
    .card:hover::before {
      left: 100%;
    }
    
    .muted { 
      color: #a3a3a3; 
    }
    
    .soft { 
      background: linear-gradient(145deg, #0f0f0f 0%, #1a1a1a 100%);
      border: 1px solid #333333;
    }
    
    .btn { 
      background: linear-gradient(145deg, #333333 0%, #1a1a1a 100%);
      color: #ffffff; 
      border: 1px solid #555555;
      box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.3),
        0 2px 4px rgba(0, 0, 0, 0.2);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }
    
    .btn:hover::before {
      left: 100%;
    }
    
    .btn:hover { 
      background: linear-gradient(145deg, #1a1a1a 0%, #000000 100%);
      transform: translateY(-2px);
      box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.4),
        0 4px 8px rgba(0, 0, 0, 0.3);
    }
    
    .btn-ghost { 
      background: linear-gradient(145deg, #1a1a1a 0%, #2a2a2a 100%);
      color: #ffffff; 
      border: 1px solid #444444;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .btn-ghost:hover { 
      background: linear-gradient(145deg, #2a2a2a 0%, #1a1a1a 100%);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
    
    .field { 
      background: linear-gradient(145deg, #0f0f0f 0%, #1a1a1a 100%);
      border: 1px solid #333333; 
      color: #ffffff;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
    }
    
    .header-gradient {
      background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 50%, #0f0f0f 100%);
      border-bottom: 1px solid #333333;
      box-shadow: 
        0 4px 20px rgba(0, 0, 0, 0.3),
        0 2px 8px rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(10px);
    }
    
    .camera-container {
      background: linear-gradient(145deg, #1a1a1a 0%, #0f0f0f 100%);
      border: 2px solid #333333;
      box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.4),
        0 4px 16px rgba(0, 0, 0, 0.2);
    }
    
    .prediction-highlight {
      background: linear-gradient(145deg, #1a1a1a 0%, #0f0f0f 100%);
      border: 1px solid #555555;
      box-shadow: 
        0 4px 16px rgba(0, 0, 0, 0.3),
        0 2px 8px rgba(0, 0, 0, 0.2);
    }
    
    .settings-panel {
      background: linear-gradient(145deg, #1a1a1a 0%, #0f0f0f 100%);
      border: 1px solid #333333;
      box-shadow: 
        0 6px 24px rgba(0, 0, 0, 0.3),
        0 2px 8px rgba(0, 0, 0, 0.2);
    }
    
    .glow-effect {
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
    }
    
    .text-glow {
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
    }
    
    .animate-pulse-slow {
      animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }
    
    .gradient-text {
      background: linear-gradient(135deg, #ffffff 0%, #cccccc 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .glass-effect {
      backdrop-filter: blur(20px);
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
  </style>
</head>
<body class="bg-black text-white">
  <header class="header-gradient sticky top-0 z-10">
    <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-full bg-gradient-to-br from-gray-300 to-gray-500 text-black grid place-items-center font-bold shadow-lg glow-effect">
          ISL
        </div>
        <h1 class="text-xl font-bold gradient-text">Indian Sign Language Detector</h1>
      </div>
      <nav class="flex items-center gap-5">
        <button id="tab-webcam" class="pb-1 tab-active transition-all duration-300 hover:text-white">Webcam</button>
        <button id="tab-upload" class="pb-1 text-gray-300 hover:text-white transition-all duration-300">Upload</button>
        <button id="tab-about" class="pb-1 text-gray-300 hover:text-white transition-all duration-300">About</button>
        <span class="mx-2 h-5 w-px bg-gray-600"></span>
        <a href="/web/terms.html" target="_blank" class="underline underline-offset-4 hover:text-white text-gray-300 transition-all duration-300">Terms</a>
        <a href="/web/usage.html" target="_blank" class="underline underline-offset-4 hover:text-white text-gray-300 transition-all duration-300">Usage</a>
      </nav>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 py-8">
    <section id="panel-webcam" class="grid grid-cols-3 gap-8 items-start">
      <!-- Camera Section - Takes 2/3 of the screen (2 columns) -->
      <div class="col-span-2 card rounded-xl p-4 camera-container">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-semibold text-white gradient-text">Live Webcam</h2>
          <div class="text-sm muted animate-pulse-slow">Grant camera access when prompted</div>
        </div>
        <div class="relative aspect-video bg-gray-800 rounded-lg overflow-hidden border-2 border-gray-600 shadow-2xl">
          <video id="video" class="w-full h-full object-cover" autoplay muted playsinline></video>
          <canvas id="canvas" class="absolute inset-0 w-full h-full"></canvas>
          <div id="grid-overlay" class="hidden absolute inset-0 overlay-grid"></div>
          <div id="ai-badge" class="hidden absolute top-3 right-3 bg-gradient-to-r from-gray-300 to-gray-500 text-black text-xs px-3 py-1 rounded-full font-bold shadow-lg glow-effect">
            AI RUNNING
          </div>
        </div>
        <div class="mt-4 flex gap-3 flex-wrap">
          <button id="btn-start" class="btn px-4 py-2 rounded-lg font-semibold">Start Camera</button>
          <button id="btn-capture" class="btn-ghost px-4 py-2 rounded-lg">Capture Once</button>
          <button id="btn-ai" class="btn px-4 py-2 rounded-lg font-semibold">Start AI</button>
          <button id="btn-stop" class="btn px-4 py-2 rounded-lg">Stop Camera</button>
          <button id="btn-reset" class="btn-ghost px-4 py-2 rounded-lg">Reset</button>
          <button id="btn-grid" class="btn-ghost px-4 py-2 rounded-lg">Toggle Grid</button>
          <button id="btn-help" class="btn-ghost px-4 py-2 rounded-lg">Help</button>
          <button id="btn-test-speech" class="btn-ghost px-4 py-2 rounded-lg">Test Speech</button>
        </div>
      </div>
      
      <!-- Right Side Panel - Takes 1/3 of the screen (1 column) -->
      <div class="col-span-1 space-y-4">
        <!-- Detection Settings -->
        <div class="card rounded-xl p-4 settings-panel">
          <div class="text-sm font-semibold mb-3 text-white gradient-text">Detection Settings</div>
          <div class="flex items-center gap-3 mb-3">
            <input id="speak-toggle" type="checkbox" class="h-4 w-4 accent-gray-400" />
            <label for="speak-toggle" class="text-sm text-gray-200">🔊 Speak labels automatically</label>
          </div>
          <div class="flex items-center gap-3 mb-3">
            <input id="auto-add-toggle" type="checkbox" class="h-4 w-4 accent-gray-400" />
            <label for="auto-add-toggle" class="text-sm text-gray-200">➕ Auto-add labels to sentence when stable</label>
          </div>
          <div class="flex items-center gap-3 mb-3">
            <input id="auto-speak-sentence-toggle" type="checkbox" class="h-4 w-4 accent-gray-400" />
            <label for="auto-speak-sentence-toggle" class="text-sm text-gray-200">🗣️ Auto-speak sentence after pause</label>
          </div>
          <div class="grid grid-cols-1 gap-2">
            <label for="conf-slider" class="text-sm text-gray-200">Confidence threshold: <span id="conf-value" class="font-semibold text-gray-300">0.80</span></label>
            <input id="conf-slider" type="range" min="0.5" max="0.99" step="0.01" value="0.80" class="w-full accent-gray-400" />
          </div>
        </div>

        <!-- Prediction -->
        <div class="card rounded-xl p-4 prediction-highlight">
          <h2 class="text-lg font-semibold mb-4 text-white">Prediction</h2>
          <div id="prediction" class="text-3xl font-bold text-white text-glow">–</div>
          <div id="confidence" class="mt-2 muted">Confidence: –</div>
          <div id="message" class="mt-2 muted"></div>
        </div>

        <!-- Sentence -->
        <div class="card rounded-xl p-4">
          <div class="text-sm font-semibold mb-2 text-white gradient-text">Sentence</div>
          <div id="sentence" class="min-h-[3rem] p-3 rounded-lg field"></div>
          <div class="mt-3 flex flex-wrap gap-2">
            <button id="btn-add" class="btn px-3 py-2 rounded-lg font-semibold">Add</button>
            <button id="btn-space" class="btn-ghost px-3 py-2 rounded-lg">Space</button>
            <button id="btn-backspace" class="btn-ghost px-3 py-2 rounded-lg">Backspace</button>
            <button id="btn-speak-sentence" class="btn px-3 py-2 rounded-lg font-semibold">Speak</button>
            <button id="btn-clear-sentence" class="btn px-3 py-2 rounded-lg">Clear</button>
            <button id="btn-copy-sentence" class="btn-ghost px-3 py-2 rounded-lg">Copy</button>
            <button id="btn-download-sentence" class="btn-ghost px-3 py-2 rounded-lg">Download</button>
          </div>
        </div>
      </div>
    </section>

    <section id="panel-upload" class="hidden grid lg:grid-cols-2 gap-8 items-start">
      <div class="card rounded-xl p-4 camera-container">
        <h2 class="text-lg font-semibold mb-4 text-white gradient-text">Upload an Image</h2>
        <input id="file-input" type="file" accept="image/*" class="block w-full text-sm text-gray-200 bg-gray-800 border border-gray-600 rounded-lg p-2" />
        <div class="mt-4">
          <img id="preview" class="max-h-80 rounded-lg hidden border-2 border-gray-600 shadow-lg"/>
        </div>
        <div class="mt-4">
          <button id="btn-upload-predict" class="btn px-4 py-2 rounded-lg font-semibold">Predict</button>
        </div>
      </div>
      <div class="card rounded-xl p-4 prediction-highlight">
        <h2 class="text-lg font-semibold mb-4 text-white">Prediction</h2>
        <div id="prediction-upload" class="text-3xl font-bold text-white text-glow">–</div>
        <div id="confidence-upload" class="mt-2 muted">Confidence: –</div>
        <div id="message-upload" class="mt-2 muted"></div>
      </div>
    </section>

    <section id="panel-about" class="hidden">
      <div class="card rounded-xl p-6 settings-panel">
        <h2 class="text-lg font-semibold mb-2 text-white gradient-text">About</h2>
        <p class="muted">This demo predicts Indian Sign Language hand gestures using a neural network trained on MediaPipe landmarks. Use the Webcam tab for continuous detection with the Start AI button. Enable auto-add to build a full sentence and auto-speak to hear it after a pause.</p>
        <ul class="list-disc pl-6 mt-4 muted">
          <li>Model: TensorFlow/Keras</li>
          <li>Landmarks: MediaPipe Hands</li>
          <li>FastAPI backend, Tailwind UI</li>
        </ul>
      </div>
    </section>
  </main>

  <footer class="text-center muted text-sm py-6 border-t border-gray-700">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex items-center justify-center gap-2">
        <span>Built with</span>
        <span class="text-gray-400 animate-pulse-slow">❤️</span>
        <span>for accessibility</span>
      </div>
    </div>
  </footer>

  <div id="help-modal" class="hidden fixed inset-0 bg-black/80 backdrop-blur-sm z-50">
    <div class="absolute inset-0 grid place-items-center px-4">
      <div class="card rounded-xl max-w-lg w-full p-6 settings-panel">
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-lg font-semibold text-white gradient-text">Help</h3>
          <button id="help-close" class="btn px-2 py-1 rounded-lg font-semibold">Close</button>
        </div>
        <ol class="list-decimal pl-5 text-sm muted space-y-2">
          <li>Click <b class="text-gray-300">Start Camera</b> and allow camera access.</li>
          <li>Click <b class="text-gray-300">Start AI</b> to begin continuous detection.</li>
          <li>Use <b class="text-gray-300">Detection Settings</b> to tune confidence and auto actions.</li>
          <li>Build sentences and use <b class="text-gray-300">Speak</b>, <b class="text-gray-300">Copy</b>, or <b class="text-gray-300">Download</b>.</li>
        </ol>
      </div>
    </div>
  </div>

  <script src="/web/js/app.js" type="module"></script>
</body>
</html>